/* ===== Reset & base ===== */
*{box-sizing:border-box}
:root{
  --bg1:#0e1726; --bg2:#202a44; --bg3:#2b3c5a;
  --panel:rgba(20,20,28,.78);
  --glass:rgba(255,255,255,.06);
  --accent:#ffd54f;
  --ok:#22c55e; --bad:#ef4444; --warn:#f59e0b; --info:#17a2b8; --purple:#6f42c1; --orange:#fd7e14;
}
html,body{height:100%}
body{
  margin:0; color:#fff; font-family:'Inter',system-ui,-apple-system,Segoe UI,Arial,sans-serif;
  background:
    radial-gradient(1000px 600px at 70% -20%, rgba(80,140,255,.18) 0%, transparent 60%),
    linear-gradient(160deg,var(--bg1),var(--bg2),var(--bg3));
  display:flex; flex-direction:column;
}
.hide{display:none!important}

/* ===== Topbar ===== */
.topbar{display:flex;gap:12px;align-items:center;justify-content:space-between;padding:10px 16px;background:#3b0a45}
.brand{font-weight:900;font-size:22px;letter-spacing:.2px}
.controls,.info,.right{display:flex;align-items:center;gap:10px}
.select{padding:8px 10px;border-radius:10px;border:none}
.select.small{padding:6px 8px}
.timer{font-size:28px;font-weight:900}
.clock{font-size:13px;opacity:.9}
.accent{color:var(--accent)}

/* ===== Buttons ===== */
.btn{padding:10px 14px;border:none;border-radius:12px;font-weight:800;cursor:pointer;
     transition:transform .14s,opacity .15s,box-shadow .15s; position:relative; overflow:hidden}
.btn:hover{transform:translateY(-1px);opacity:.98;box-shadow:0 10px 24px rgba(0,0,0,.25)}
.btn:active{transform:scale(.98)}
.btn:disabled{background:#555!important;cursor:not-allowed;opacity:.6}
.btn::after{content:"";position:absolute;inset:0;background:radial-gradient(closest-side,rgba(255,255,255,.22),transparent);
            opacity:0;transform:scale(0);transition:transform .25s,opacity .25s}
.btn:active::after{opacity:1;transform:scale(1)}
.btn.clicked{animation:btnbuzz .18s linear 1}
@keyframes btnbuzz{25%{transform:translateX(-1px)}50%{transform:translateX(1px)}75%{transform:translateX(-1px)}}

.btn-call{background:var(--accent);color:#000}
.btn-ok{background:var(--ok)}
.btn-bad{background:var(--bad)}
.btn-info{background:var(--info)}
.btn-warn{background:var(--warn)}
.btn-purple{background:var(--purple)}
.btn-orange{background:var(--orange)}
.btn-sound{background:#444;color:#fff}
.btn-mini{width:36px;height:36px;border-radius:8px;background:#555;color:#fff;border:none;cursor:pointer}

/* ===== Window (Cấu hình) ===== */
.window{background:var(--panel);backdrop-filter: blur(6px);border-radius:16px;width:760px;
        position:absolute;top:76px;left:18px;z-index:10;border:1px solid rgba(255,255,255,.08)}
.wbar{display:flex;justify-content:space-between;align-items:center;background:rgba(0,0,0,.35);
      padding:10px 14px;border-radius:16px 16px 0 0;cursor:move;font-weight:800}
.wbar .wctrl button{background:none;border:none;color:#fff;font-size:18px;cursor:pointer}
.wbody{padding:14px}
.field{margin-bottom:12px}
.field label{display:block;margin-bottom:8px;font-size:14px;font-weight:600}
.hint-sm{font-size:12px;opacity:.85}
.spin{display:flex;align-items:center;gap:8px}
.spin input{width:110px;text-align:center;padding:8px;border-radius:10px;border:1px solid #777;color:#000;background:#fff}

/* ===== Lessons grid ===== */
.lesson-wrap{display:grid;grid-template-columns:repeat(6,minmax(110px,1fr));gap:10px}
.pill{padding:10px;border-radius:12px;background:#2d2d36;text-align:center;cursor:pointer;user-select:none;border:1px solid #444}
.pill.active{background:var(--ok);border-color:#2ecc71;font-weight:800}
.pill.chapter{grid-column:1/-1;background:#1c1c22;border:1px solid #333;cursor:default;font-weight:900}

/* ===== Buttons row ===== */
.buttons{display:flex;justify-content:space-between;align-items:center;margin-top:8px}
.rightBtns{display:flex;gap:10px}

/* ===== Stage ===== */
.stage{flex:1;display:flex;align-items:center;justify-content:center;position:relative;padding:8px}
.card{width:88%;max-width:1100px;background:var(--glass);border-radius:18px;padding:26px;box-shadow:0 0 26px rgba(0,0,0,.45)}
.qtext{font-size:28px;line-height:1.35;margin:10px 0 18px;text-align:center}
.opts{display:flex;flex-direction:column;gap:12px;max-width:900px;margin:0 auto}
.opt{padding:16px 18px;border-radius:14px;background:#191a1f;border:1px solid #444;cursor:pointer;text-align:left;
     font-size:20px;line-height:1.4;min-height:60px;display:flex;align-items:center}
.opt:hover{background:#23242b}
.opt.selected{outline:3px solid #888}
.opt.correct{background:var(--ok)!important}
.opt.incorrect{background:var(--bad)!important}
.prog{margin-top:14px;text-align:center;font-size:16px}
.hint{font-size:18px;color:#eee}

/* ===== Overlay gọi tên ===== */
.overlay{position:absolute;inset:0;background:rgba(0,0,0,.84);display:flex;justify-content:center;align-items:center;z-index:999}
.randombox{display:flex;flex-direction:column;align-items:center;gap:14px}
.running{font-size:26px;opacity:.9}
.bigname{font-size:70px;font-weight:900;color:var(--accent);text-shadow:2px 2px 8px #000;animation:pop .8s ease-in-out infinite alternate}
.subnote{opacity:.8}
@keyframes pop{from{transform:scale(1)}to{transform:scale(1.08)}}

/* ===== Taskbar ===== */
#taskbar{position:fixed;bottom:0;left:0;width:100%;background:#14151a;display:flex;gap:8px;padding:6px 10px;border-top:1px solid #2b2d35}
.task-chip{background:#2a2d38;border:1px solid #3c3f4a;color:#fff;padding:6px 10px;border-radius:10px;cursor:pointer}

/* ===== Shuffle FX ===== */
.fx{position:absolute;inset:0;display:none;align-items:center;justify-content:center;font-size:44px;font-weight:800;color:#ff0;background:rgba(0,0,0,.35);z-index:998;overflow:hidden}
.fx.show{display:flex}
.fx .symbol{position:absolute;opacity:.9;animation:float 1.8s linear infinite}
@keyframes float{
  0%{transform:translateY(110vh) rotate(0deg)}
  100%{transform:translateY(-10vh) rotate(360deg)}
}

/* ===== Toast ===== */
.toast{position:fixed;bottom:68px;left:50%;transform:translateX(-50%);background:#fff;color:#000;padding:10px 14px;border-radius:10px;display:none;box-shadow:0 6px 16px rgba(0,0,0,.25)}

/* ===== Debug ===== */
.debug{position:fixed;right:10px;bottom:80px;width:360px;max-height:260px;overflow:auto;background:rgba(0,0,0,.7);border:1px solid #f66;border-radius:8px;padding:8px;font-size:12px;line-height:1.4;display:none}

/* ===== Responsive ===== */
@media (max-width: 1100px){
  .window{width:92vw;left:4vw}
  .lesson-wrap{grid-template-columns:repeat(3,1fr)}
  .qtext{font-size:24px}
  .opt{font-size:18px}
}
