/* ===== Base ===== */
*{box-sizing:border-box}
:root{
  --bg-a:#0f2027; --bg-b:#203a43; --bg-c:#2c5364;
  --panel: rgba(0,0,0,.72);
  --accent:#ffeb3b;
}
html,body{height:100%}
body{
  margin:0; color:#fff; font-family:Inter,Segoe UI,Arial,sans-serif;
  background:radial-gradient(1200px 600px at 70% -20%, #1f2a44 0%, transparent 60%),
             linear-gradient(160deg,var(--bg-a),var(--bg-b),var(--bg-c));
  display:flex; flex-direction:column;
}
.hide{display:none!important}

/* ===== Topbar ===== */
.topbar{display:flex;gap:12px;align-items:center;justify-content:space-between;padding:10px 16px;background:#3b0a45}
.brand{font-weight:900;font-size:22px;letter-spacing:.2px}
.controls,.info,.right{display:flex;align-items:center;gap:10px}
.select{padding:8px 10px;border-radius:10px;border:none}
.select.small{padding:6px 8px}
.timer{font-size:28px;font-weight:900}
.clock{font-size:13px;opacity:.9}
.accent{color:var(--accent)}

/* ===== Buttons ===== */
.btn{padding:10px 14px;border:none;border-radius:12px;font-weight:800;cursor:pointer;
     transition:transform .14s,opacity .15s,box-shadow .15s; position:relative; overflow:hidden}
.btn:hover{transform:translateY(-1px);opacity:.98;box-shadow:0 10px 24px rgba(0,0,0,.25)}
.btn:active{transform:scale(.98)}
.btn:disabled{background:#555!important;cursor:not-allowed;opacity:.6}
.btn::after{content:"";position:absolute;inset:0;background:radial-gradient(closest-side,rgba(255,255,255,.25),transparent);
            opacity:0;transform:scale(0);transition:transform .25s,opacity .25s}
.btn:active::after{opacity:1;transform:scale(1)}
.btn.clicked{animation:btnbuzz .18s linear 1}
@keyframes btnbuzz{25%{transform:translateX(-1px)}50%{transform:translateX(1px)}75%{transform:translateX(-1px)}}

.btn-call{background:#ffd54f;color:#000}
.btn-ok{background:#22c55e}
.btn-bad{background:#ef4444}
.btn-info{background:#17a2b8}
.btn-warn{background:#f59e0b}
.btn-purple{background:#6f42c1}
.btn-orange{background:#fd7e14}
.btn-sound{background:#444;color:#fff}
.btn-mini{width:36px;height:36px;border-radius:8px;background:#555;color:#fff;border:none;cursor:pointer}

/* ===== Window (cấu hình) ===== */
.window{background:var(--panel);border-radius:16px;width:680px; /* rộng ~1.5x */
        position:absolute;top:76px;left:20px;z-index:10}
.wbar{display:flex;justify-content:space-between;align-items:center;background:#1f1f1f;padding:10px 14px;
      border-radius:16px 16px 0 0;cursor:move;font-weight:700}
.wbar .wctrl button{background:none;border:none;color:#fff;font-size:18px;cursor:pointer}
.wbody{padding:14px}
.field{margin-bottom:12px}
.field label{display:block;margin-bottom:8px;font-size:14px}
.hint-sm{font-size:12px;opacity:.85}
.spin{display:flex;align-items:center;gap:8px}
.spin input{width:110px;text-align:center;padding:8px;border-radius:10px;border:1px solid #777;color:#000}

/* ===== Lessons grid ===== */
.lesson-wrap{display:grid;grid-template-columns:repeat(6,minmax(120px,1fr));gap:10px}
.pill{padding:10px;border-radius:12px;background:#3a3a3a;text-align:center;cursor:pointer;user-select:none;border:1px solid #555}
.pill.active{background:#22c55e;border-color:#2ecc71;font-weight:800}
.pill.chapter{grid-column:1/-1;background:#222;border:1px solid #333;cursor:default;font-weight:900}

/* ===== Buttons row ===== */
.buttons{display:flex;justify-content:space-between;align-items:center;margin-top:8px}
.rightBtns{display:flex;gap:10px}

/* ===== Stage ===== */
.stage{flex:1;display:flex;align-items:center;justify-content:center;position:relative;padding:8px}
.card{width:88%;max-width:1100px;background:rgba(255,255,255,.06);border-radius:18px;padding:26px;box-shadow:0 0 26px rgba(0,0,0,.45)}
.qtext{font-size:30px;line-height:1.35;margin:10px 0 18px;text-align:center}
.opts{display:flex;flex-direction:column;gap:12px;max-width:900px;margin:0 auto}
.opt{padding:18px 18px;border-radius:14px;background:#1f1f1f;border:1px solid #555;cursor:pointer;text-align:left;
     font-size:22px;line-height:1.4;min-height:60px;display:flex;align-items:center}
.opt:hover{background:#2a2a2a}
.opt.selected{outline:3px solid #888}
.opt.correct{background:#22c55e!important}
.opt.incorrect{background:#ef4444!important}
.prog{margin-top:14px;text-align:center;font-size:16px}
.hint{font-size:18px;color:#eee}

/* ===== Overlay tên HS ===== */
.overlay{position:absolute;inset:0;background:rgba(0,0,0,.86);display:flex;justify-content:center;align-items:center;z-index:999}
.bigname{font-size:72px;font-weight:900;color:var(--accent);text-shadow:2px 2px 8px #000;animation:pop .8s ease-in-out infinite alternate}
@keyframes pop{from{transform:scale(1)}to{transform:scale(1.08)}}

/* ===== Taskbar ===== */
#taskbar{position:fixed;bottom:0;left:0;width:100%;background:#181818;display:flex;gap:8px;padding:6px 10px;border-top:1px solid #333}
.task-chip{background:#2a2a2a;border:1px solid #444;color:#fff;padding:6px 10px;border-radius:10px;cursor:pointer}

/* ===== Shuffle FX ===== */
.fx{position:absolute;inset:0;display:none;align-items:center;justify-content:center;font-size:44px;font-weight:800;color:#ff0;background:rgba(0,0,0,.35);z-index:998;overflow:hidden}
.fx.show{display:flex}
.fx .symbol{position:absolute;opacity:.9;animation:float 1.8s linear infinite}
@keyframes float{
  0%{transform:translateY(110vh) rotate(0deg)}
  100%{transform:translateY(-10vh) rotate(360deg)}
}

/* ===== Toast ===== */
.toast{position:fixed;bottom:68px;left:50%;transform:translateX(-50%);background:#fff;color:#000;padding:10px 14px;border-radius:10px;display:none;box-shadow:0 6px 16px rgba(0,0,0,.25)}

/* ===== Debug ===== */
.debug{position:fixed;right:10px;bottom:80px;width:360px;max-height:260px;overflow:auto;background:rgba(0,0,0,.7);border:1px solid #f66;border-radius:8px;padding:8px;font-size:12px;line-height:1.4;display:none}
